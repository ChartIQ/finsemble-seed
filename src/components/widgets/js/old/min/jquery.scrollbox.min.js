!function(e){e.fn.scrollbox=function(t){var i={linear:!1,startDelay:2,delay:3,step:5,speed:32,switchItems:1,direction:"vertical",distance:"auto",autoPlay:!0,onMouseOverPause:!0,paused:!1,queue:null,listElement:"ul",listItemElement:"li",infiniteLoop:!0,switchAmount:0,afterForward:null,afterBackward:null};return t=e.extend(i,t),t.scrollOffset="vertical"===t.direction?"scrollTop":"scrollLeft",t.queue&&(t.queue=e("#"+t.queue)),this.each(function(){var i,n,l,r,s,a,c,o,u=e(this),d=null,f=null,m=!1,h=0;t.onMouseOverPause&&(u.bind("mouseover",function(){m=!0}),u.bind("mouseout",function(){m=!1})),i=u.children(t.listElement+":first-child"),t.infiniteLoop===!1&&0===t.switchAmount&&(t.switchAmount=i.children().length),s=function(){if(!m){var n,r,s,a,c;if(n=i.children(t.listItemElement+":first-child"),a="auto"!==t.distance?t.distance:"vertical"===t.direction?n.outerHeight(!0):n.outerWidth(!0),t.linear?s=Math.min(u[0][t.scrollOffset]+t.step,a):(c=Math.max(3,parseInt(.3*(a-u[0][t.scrollOffset]),10)),s=Math.min(u[0][t.scrollOffset]+c,a)),u[0][t.scrollOffset]=s,s>=a){for(r=0;r<t.switchItems;r++)t.queue&&t.queue.find(t.listItemElement).length>0?(i.append(t.queue.find(t.listItemElement)[0]),i.children(t.listItemElement+":first-child").remove()):i.append(i.children(t.listItemElement+":first-child")),++h;if(u[0][t.scrollOffset]=0,clearInterval(d),e.isFunction(t.afterForward)&&t.afterForward.call(u,{switchCount:h,currentFirstChild:i.children(t.listItemElement+":first-child")}),t.infiniteLoop===!1&&h>=t.switchAmount)return;t.autoPlay&&(f=setTimeout(l,1e3*t.delay))}}},a=function(){if(!m){var n,r,s,a,c;if(0===u[0][t.scrollOffset]){for(r=0;r<t.switchItems;r++)i.children(t.listItemElement+":last-child").insertBefore(i.children(t.listItemElement+":first-child"));n=i.children(t.listItemElement+":first-child"),a="auto"!==t.distance?t.distance:"vertical"===t.direction?n.height():n.width(),u[0][t.scrollOffset]=a}t.linear?s=Math.max(u[0][t.scrollOffset]-t.step,0):(c=Math.max(3,parseInt(.3*u[0][t.scrollOffset],10)),s=Math.max(u[0][t.scrollOffset]-c,0)),u[0][t.scrollOffset]=s,0===s&&(--h,clearInterval(d),e.isFunction(t.afterBackward)&&t.afterBackward.call(u,{switchCount:h,currentFirstChild:i.children(t.listItemElement+":first-child")}),t.autoPlay&&(f=setTimeout(l,1e3*t.delay)))}},l=function(){clearInterval(d),d=setInterval(s,t.speed)},c=function(){t.autoPlay=!0,m=!1,clearInterval(d),d=setInterval(s,t.speed)},o=function(){m=!0},n=function(){clearInterval(d),d=setInterval(a,t.speed)},r=function(e){t.delay=e||t.delay,clearTimeout(f),t.autoPlay&&(f=setTimeout(l,1e3*t.delay))},t.autoPlay&&(f=setTimeout(l,1e3*t.startDelay)),u.bind("resetClock",function(e){r(e)}),u.bind("forward",function(){clearTimeout(f),l()}),u.bind("pauseHover",function(){o()}),u.bind("forwardHover",function(){c()}),u.bind("backward",function(){clearTimeout(f),n()}),u.bind("speedUp",function(e){"undefined"===e&&(e=Math.max(1,parseInt(t.speed/2,10))),t.speed=e}),u.bind("speedDown",function(e){"undefined"===e&&(e=2*t.speed),t.speed=e}),u.bind("updateConfig",function(i){t=e.extend(t,i)})})}}(jQuery);